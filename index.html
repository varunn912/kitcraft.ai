<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KitCraft.AI</title>
    <script type="importmap">
    {
      "imports": {
        "react": "https://aistudiocdn.com/react@^19.1.1",
        "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
        "react/": "https://aistudiocdn.com/react@^19.1.1/",
        "@google/genai": "https://aistudiocdn.com/@google/genai@^1.20.0",
        "react-transition-group": "https://aistudiocdn.com/react-transition-group@^4.4.5"
      }
    }
    </script>
    <!-- CRITICAL FIX: Add Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              fuchsia: {
                ...tailwind.colors.fuchsia,
                '400': '#e879f9',
                '500': '#d946ef',
                '600': '#c026d3',
              },
              cyan: {
                ...tailwind.colors.cyan,
                '300': '#67e8f9',
                '400': '#22d3ee',
              }
            }
          }
        }
      }
    </script>

    <style>
        /* Basic Reset & Font Setup */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            margin: 0;
            background-color: #020617; /* dark:bg-slate-950 */
        }
        
        html.light body {
            background-color: #f1f5f9; /* light:bg-slate-100 */
        }

        /* Animated Grid Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image: 
                linear-gradient(to right, rgba(100, 116, 139, 0.12) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(100, 116, 139, 0.12) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: pan-grid 200s linear infinite;
            z-index: -1;
            will-change: transform;
        }
        
        @keyframes pan-grid {
            from { background-position: 0 0; }
            to { background-position: 2000px 2000px; }
        }

        /* Animated View Transitions */
        .fade-enter {
            opacity: 0;
            transform: translateY(10px);
        }
        .fade-enter-active {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 300ms, transform 300ms;
        }
        .fade-exit {
            opacity: 1;
            transform: translateY(0);
        }
        .fade-exit-active {
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 300ms, transform 300ms;
        }

        /* Cube Loader Animation */
        .sk-cube-grid {
            width: 40px;
            height: 40px;
            margin: 20px auto;
        }
        .sk-cube-grid .sk-cube {
            width: 33%;
            height: 33%;
            background-color: #d946ef; /* fuchsia-500 */
            float: left;
            -webkit-animation: sk-cubeGridScaleDelay 1.3s infinite ease-in-out;
            animation: sk-cubeGridScaleDelay 1.3s infinite ease-in-out; 
        }
        .sk-cube-grid .sk-cube1 { -webkit-animation-delay: 0.2s; animation-delay: 0.2s; }
        .sk-cube-grid .sk-cube2 { -webkit-animation-delay: 0.3s; animation-delay: 0.3s; }
        .sk-cube-grid .sk-cube3 { -webkit-animation-delay: 0.4s; animation-delay: 0.4s; }
        .sk-cube-grid .sk-cube4 { -webkit-animation-delay: 0.1s; animation-delay: 0.1s; }
        .sk-cube-grid .sk-cube5 { -webkit-animation-delay: 0.2s; animation-delay: 0.2s; }
        .sk-cube-grid .sk-cube6 { -webkit-animation-delay: 0.3s; animation-delay: 0.3s; }
        .sk-cube-grid .sk-cube7 { -webkit-animation-delay: 0.0s; animation-delay: 0.0s; }
        .sk-cube-grid .sk-cube8 { -webkit-animation-delay: 0.1s; animation-delay: 0.1s; }
        .sk-cube-grid .sk-cube9 { -webkit-animation-delay: 0.2s; animation-delay: 0.2s; }

        @-webkit-keyframes sk-cubeGridScaleDelay {
            0%, 70%, 100% { -webkit-transform: scale3D(1, 1, 1); transform: scale3D(1, 1, 1); }
            35% { -webkit-transform: scale3D(0, 0, 1); transform: scale3D(0, 0, 1); }
        }
        @keyframes sk-cubeGridScaleDelay {
            0%, 70%, 100% { -webkit-transform: scale3D(1, 1, 1); transform: scale3D(1, 1, 1); }
            35% { -webkit-transform: scale3D(0, 0, 1); transform: scale3D(0, 0, 1); }
        }
    </style>
    <!-- FOIT Prevention Script -->
    <script>
        (function() {
            try {
                const theme = localStorage.getItem('theme');
                if (theme === 'light') {
                    document.documentElement.classList.remove('dark');
                } else {
                    document.documentElement.classList.add('dark');
                }
            } catch (e) {
                // If localStorage is not available, default to dark
                document.documentElement.classList.add('dark');
            }
        })();
    </script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-slate-100 dark:bg-slate-950 text-slate-800 dark:text-slate-200">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>